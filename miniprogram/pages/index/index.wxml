<view class="container">
  <view class="header">
    <view class="token-input-wrapper">
      <input
        class="token-input"
        placeholder="Enter Access Token"
        placeholder-class="token-placeholder"
        value="{{accessToken}}"
        bindinput="onAccessTokenInput"
      />
    </view>
  </view>

  <view class="main">
    <view class="status-box">
      <text class="status-text">{{statusText}}</text>
      <text class="timer" wx:if="{{isRecording || tempFilePath}}">{{recordSeconds}}s</text>
    </view>

    <view class="record-container" wx:if="{{!tempFilePath}}">
      <view 
        class="mic-btn {{isRecording ? 'active' : ''}}"
        bindtouchstart="handleTouchStart"
        bindtouchend="handleTouchEnd"
      >
        <view class="mic-icon">
          <view class="mic-body"></view>
          <view class="mic-bottom"></view>
        </view>
        <view class="pulse" wx:if="{{isRecording}}"></view>
      </view>
      <text class="hint">{{isRecording ? 'Release to stop' : 'Hold to record'}}</text>
    </view>

    <view class="action-container" wx:if="{{tempFilePath && !uploading}}">
      <view class="action-group">
        <view class="circle-btn play" bindtap="playRecord">
          <view class="play-icon"></view>
          <text>播放</text>
        </view>
        <view class="circle-btn upload" bindtap="uploadRecord">
          <view class="upload-icon"></view>
          <text>上传</text>
        </view>
        <view class="circle-btn delete" bindtap="deleteRecord">
          <view class="delete-icon"></view>
          <text>删除</text>
        </view>
      </view>
    </view>

    <view class="uploading-box" wx:if="{{uploading}}">
      <view class="spinner"></view>
      <text>Uploading...</text>
    </view>
  </view>

  <view class="footer" wx:if="{{fileId}}">
    <text class="file-id">Last File ID: {{fileId}}</text>
  </view>
</view>
